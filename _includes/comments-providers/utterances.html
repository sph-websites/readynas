{% comment %}

Utterances comment system - Overide theme version

Enable custom issue term to be defined per page, else use _config.yml definition or default 'pathname'
Also enable addition of custom GitHub label to issue - default = "comment"

{% endcomment %}
{% if page.comment-term %}
  {% assign issue-term = page.comment-term %}
{% elsif site.comments.utterances.issue_term %}
  {% assign issue-term = site.comments.utterances.issue_term %}
{% else %}
  {% assign issue-term = "pathname" %}
{% endif %}

<script>
  'use strict';

  (function() {
    var commentContainer = document.querySelector('#utterances-comments');

    if (!commentContainer) {
      return;
    }

    var script = document.createElement('script');
    script.setAttribute('src', 'https://utteranc.es/client.js');
    script.setAttribute('repo', '{{ site.repository }}');
    script.setAttribute('issue-term', '{{ issue-term | default: "pathname" }}');
    script.setAttribute('label', '{{ site.comments.utterances.label | default: "comment" }}');
    script.setAttribute('theme', '{{ site.comments.utterances.theme | default: "github-light" }}');
    script.setAttribute('crossorigin', 'anonymous');

    commentContainer.appendChild(script);
  })();
</script>
